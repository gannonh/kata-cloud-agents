#!/bin/sh
set -eu

# Skip CI checks for branch deletions (zero SHA = delete ref)
ZERO="0000000000000000000000000000000000000000"
while read local_ref local_sha remote_ref remote_sha; do
  if [ "$local_sha" != "$ZERO" ]; then
    echo "Running local CI checks before push..."
    pnpm ci:checks
    exit $?
  fi
done

exit 0
